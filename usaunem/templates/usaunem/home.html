  {% extends "usaunem/header.html" %}

  {% block content %}
      {% load staticfiles %}
      <div align="center">
          <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
          <script type="text/javascript">
           google.charts.load('current', {'packages':['line']});
            google.charts.setOnLoadCallback(drawChart);


  function convertUTCDateToLocalDate(date) {
        var newDate = new Date(date.getTime()+date.getTimezoneOffset()*60*1000);

        var offset = date.getTimezoneOffset() / 60;
        var hours = date.getHours();

        newDate.setHours(hours - offset);

        return newDate;
    }

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('date', 'Monthly Dates');
      data.addColumn('number', 'Three Month Avg');
      data.addColumn('number', 'Twelve Month Avg');
      data.addColumn('number', 'Thirty Six Month Avg');

        var chartData = $.map({{chart | safe }}, function(e) {
            e[0] = convertUTCDateToLocalDate(new Date(e[0]));
            return [e];
        });

        console.log(chartData);
      data.addRows(chartData);

      var options = {
        chart: {
          title: 'USA Employement',
          subtitle: 'Avg Stats (3,12,36)'
        },
        width: 1800,
        height: 600
      };

      var chart = new google.charts.Line(document.getElementById('linechart_material'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
    </script>

      </div>
      <div id="linechart_material" style="width: 100%; height: 700px"></div>
      <div align="center" class="checkbox">
        <label><input type="checkbox">Highlight Recessions</label>
      </div>
    {% endblock %}